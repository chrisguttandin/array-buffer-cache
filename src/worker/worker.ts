// tslint:disable-next-line:max-line-length
export const worker = `!function(){"use strict";!function(){function e(e){this.value=e}function r(r){function t(o,a){try{var s=r[o](a),i=s.value;i instanceof e?Promise.resolve(i.value).then(function(e){t("next",e)},function(e){t("throw",e)}):n(s.done?"return":"normal",s.value)}catch(e){n("throw",e)}}function n(e,r){switch(e){case"return":o.resolve({value:r,done:!0});break;case"throw":o.reject(r);break;default:o.resolve({value:r,done:!1})}(o=o.next)?t(o.key,o.arg):a=null}var o,a;this._invoke=function(e,r){return new Promise(function(n,s){var i={key:e,arg:r,resolve:n,reject:s,next:null};a?a=a.next=i:(o=a=i,t(e,r))})},"function"!=typeof r.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(r.prototype[Symbol.asyncIterator]=function(){return this}),r.prototype.next=function(e){return this._invoke("next",e)},r.prototype.throw=function(e){return this._invoke("throw",e)},r.prototype.return=function(e){return this._invoke("return",e)}}();var e=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),t=new(function(){function t(){e(this,t),this._store=new Map}return r(t,[{key:"clone",value:function(e){var r=this._store.get(e);if(void 0===r)throw new Error('There is no arrayBuffer stored with an id called "'+e+'".');return r.slice(0)}},{key:"purge",value:function(e){if(!this._store.delete(e))throw new Error('There is no arrayBuffer stored with an id called "'+e+'".')}},{key:"slice",value:function(e,r,t){var n=this._store.get(e);if(void 0===n)throw new Error('There is no arrayBuffer stored with an id called "'+e+'".');return n.slice(r,null===t?n.byteLength:t)}},{key:"store",value:function(e,r){if(this._store.has(e))throw new Error('There is already an arrayBuffer stored with an id called "'+e+'".');this._store.set(e,r)}}]),t}());addEventListener("message",function e(r,n){var o=n.data;try{if("clone"===o.method){var a=o.id,s=o.params.arrayBufferId,i=t.clone(s);r.postMessage({error:null,id:a,result:{arrayBuffer:i}},[i])}else if("connect"===o.method){var u=o.id,l=o.params.port;l.start(),l.addEventListener("message",e.bind(null,l)),r.postMessage({error:null,id:u,result:null})}else if("disconnect"===o.method){var f=o.id;o.params.port.close(),r.postMessage({error:null,id:f,result:null})}else if("purge"===o.method){var c=o.id,d=o.params.arrayBufferId;t.purge(d),r.postMessage({error:null,id:c,result:null})}else if("slice"===o.method){var h=o.id,v=o.params,y=v.arrayBufferId,p=v.begin,m=v.end,w=void 0===m?null:m,g=t.slice(y,p,w);r.postMessage({error:null,id:h,result:{arrayBuffer:g}},[g])}else if("store"===o.method){var b=o.id,k=o.params,B=k.arrayBuffer,_=k.arrayBufferId;t.store(_,B),r.postMessage({error:null,id:b,result:null})}}catch(e){r.postMessage({error:{message:e.message},id:o.id,result:null})}}.bind(null,self))}();`;
