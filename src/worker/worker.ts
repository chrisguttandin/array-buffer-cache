// This is the minified and stringified code of the array-buffer-cache-worker package.
export const worker = `(()=>{var e={312:function(e,r){!function(e){"use strict";var r=function(e){return function(r){var t=e(r);return r.add(t),t}},t=function(e){return function(r,t){return e.set(r,t),t}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,r){return function(t){var a=r.get(t),i=void 0===a?t.size:a<s?a+1:0;if(!t.has(i))return e(t,i);if(t.size<o){for(;t.has(i);)i=Math.floor(Math.random()*s);return e(t,i)}if(t.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;t.has(i);)i=Math.floor(Math.random()*n);return e(t,i)}},i=new WeakMap,u=t(i),c=a(u,i),l=r(c);e.addUniqueNumber=l,e.generateUniqueNumber=c}(r)}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var s=r[n]={exports:{}};return e[n].call(s.exports,s,s.exports,t),s.exports}(()=>{"use strict";const e=-32603,r=-32602,n=-32601,o=(e,r)=>Object.assign(new Error(e),{status:r}),s=r=>o('The handler of the method called "'.concat(r,'" returned an unexpected result.'),e),a=(r,t)=>async a=>{let{data:{id:i,method:u,params:c}}=a;const l=t[u];try{if(void 0===l)throw(e=>o('The requested method called "'.concat(e,'" is not supported.'),n))(u);const t=void 0===c?l():l(c);if(void 0===t)throw(r=>o('The handler of the method called "'.concat(r,'" returned no required result.'),e))(u);const a=t instanceof Promise?await t:t;if(null===i){if(void 0!==a.result)throw s(u)}else{if(void 0===a.result)throw s(u);const{result:e,transferables:t=[]}=a;r.postMessage({id:i,result:e},t)}}catch(e){const{message:t,status:n=-32603}=e;r.postMessage({error:{code:n,message:t},id:i})}};var i=t(312);const u=new Map,c=(e,t,n)=>({...t,connect:r=>{let{port:n}=r;n.start();const o=e(n,t),s=(0,i.generateUniqueNumber)(u);return u.set(s,(()=>{o(),n.close(),u.delete(s)})),{result:s}},disconnect:e=>{let{portId:t}=e;const n=u.get(t);if(void 0===n)throw(e=>o('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),r))(t);return n(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const r=new ArrayBuffer(0),{port1:t,port2:n}=new MessageChannel;t.onmessage=r=>{let{data:t}=r;return e(null!==t)},n.postMessage(r,[r])}))){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),l=function(e,r){const t=c(l,r,arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0),n=a(e,t);return e.addEventListener("message",n),()=>e.removeEventListener("message",n)};const d=new class{constructor(){this._store=new Map}clone(e){const r=this._store.get(e);if(void 0===r)throw new Error('There is no arrayBuffer stored with an id called "'.concat(e,'".'));return r.slice(0)}purge(e){if(!this._store.delete(e))throw new Error('There is no arrayBuffer stored with an id called "'.concat(e,'".'))}slice(e,r,t){const n=this._store.get(e);if(void 0===n)throw new Error('There is no arrayBuffer stored with an id called "'.concat(e,'".'));if(r<0||r>n.byteLength)throw new Error('The given value for begin "'.concat(r,'" is out of bounds.'));if(null!==t){if(t>n.byteLength)throw new Error('The given value for end "'.concat(t,'" is out of bounds.'));if(t<r)throw new Error('The given value for end "'.concat(t,'" is below the given value for begin "').concat(r,'".'))}return n.slice(r,null===t?n.byteLength:t)}store(e,r){if(this._store.has(e))throw new Error('There is already an arrayBuffer stored with an id called "'.concat(e,'".'));this._store.set(e,r)}};l(self,{clone:e=>{let{arrayBufferId:r}=e;const t=d.clone(r);return{result:t,transferables:[t]}},purge:e=>{let{arrayBufferId:r}=e;return d.purge(r),{result:null}},slice:e=>{let{arrayBufferId:r,begin:t,end:n}=e;const o=d.slice(r,t,n);return{result:o,transferables:[o]}},store:e=>{let{arrayBuffer:r,arrayBufferId:t}=e;return d.store(t,r),{result:null}}})})()})();`; // tslint:disable-line:max-line-length
